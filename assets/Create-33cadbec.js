import{r as e,u as y,a as p,c as I,j as n,F as T,b as o,d as N,e as S,s as j,f as C}from"./index-3e326eaa.js";function E(){e.useState([]);const[t,m]=e.useState(localStorage.getItem("joinId")),[s,l]=e.useState(""),[u,h]=e.useState("Join Room"),[f,r]=e.useState("");e.useEffect(()=>{localStorage.setItem("lobby",s)},[s]);let i=s===""?"a":s;const c=y();e.useEffect(()=>{i=s===""?"a":s;const a=p(S,i,i);return I(a,d=>{if(d.exists()){const x=d.data().join||[];m(x)}})},[s]);const g=p(S,i,i);function b(a){a.preventDefault(),s===""&&r("Invalid room id")(setTimeout(()=>{r("")},3e3)),t===null&&r("Invalid room id")(setTimeout(()=>{r("")},3e3)),s==="game"+t.host&&(N(g,{join:{lobby:s,friend:s,joined:!0,host:t.host}}),h("Loading please wait"),setTimeout(()=>{c("/game")},3e3))}return n(T,{children:o("form",{onSubmit:b,children:[n("input",{type:"text",onChange:a=>l(a.target.value)}),o("button",{style:{marginTop:"20px"},className:"btnstart",children:[" ",u,"  "]}),o("p",{children:[" ",f," "]})]})})}function w(){const[t,m]=e.useState(""),[s,l]=e.useState(""),[u,h]=e.useState(""),[f,r]=e.useState(Math.floor(Math.random()*3+1)),[i,c]=e.useState(""),g=y();e.useEffect(()=>{c(localStorage.getItem("name"))},[i]),e.useEffect(()=>{c(localStorage.getItem("lobby"))},[t]);function b(){if(t==="")l("Username needed!!"),setTimeout(()=>{l("")},4e3);else{h("Creating lobby");const a=j(S,"game"+t),v=p(a,"game"+t);C(v,{setOne:{one:"",id:1},setTwo:{two:"",id:2},setThree:{Three:"",id:3},setFour:{four:"",id:4},setFive:{five:"",id:5},setSix:{six:"",id:6},setSeven:{seven:"",id:7},setEight:{eight:"",id:8},setNine:{nine:"",id:9},Disabled:{Disabled:!1},join:{lobby:t+"friend",friend:"",joined:!1,host:t}}).then(()=>{console.log("Document successfully written!")}).catch(d=>{console.error("Error writing document: ",d)}),setTimeout(()=>{g("/game")},3e3)}}return e.useEffect(()=>{localStorage.setItem("name",t)},[t]),e.useEffect(()=>{localStorage.setItem("code",t)},[t]),o("div",{className:"homepage-div",style:f===1?{backgroundPosition:"left"}:{backgroundPosition:"right"},children:[n("h2",{className:"simple-h2",children:"Tic Tac Toe Game"}),o("div",{className:"create-room",children:[n("h2",{className:"h2",children:" Create room"}),o("div",{className:"creatediv",children:[n("input",{type:"text",onChange:a=>m(a.target.value)}),n("button",{className:"btnstart",style:{marginTop:"20px"},onClick:b,children:" Create lobby "})," "]}),o("div",{style:{height:"30px",marginBottom:"20px"},children:[o("p",{children:[" ",s," "]}),o("p",{children:[" ",u," "]})]})]}),o("div",{className:"joins-room",children:[" ",n("h2",{className:"h2",children:" Join Room"}),n(E,{})]})]})}export{w as default};
