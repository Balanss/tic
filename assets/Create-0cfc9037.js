import{r as e,u as S,j as o,F as x,a as d,s as T,d as C,c as E,b as P,e as b,f as R,g as j}from"./index-35eb6b39.js";function N(){const[t,m]=e.useState([]),[i,c]=e.useState(""),[a,u]=e.useState(""),[f,g]=e.useState(""),[h,s]=e.useState(""),r=S();e.useEffect(()=>{(async()=>{const n=T(b,a),v=C(n);E(v,p=>{m(p.docs.map(y=>({...y.data(),id:y.id})))})})()},[a]),e.useEffect(()=>{localStorage.setItem("player2",i)},[i]),e.useEffect(()=>{localStorage.setItem("lobby",a)},[a]);function I(l){l.preventDefault(),a===""?(s("Invalid room id"),setTimeout(()=>{s("")},3e3)):t.map((n,v)=>{if(a===n.code){g("Loading please wait");const p=P(b,a,n.id);R(p,{joined:!0}),c(n.name+"friend"),setTimeout(()=>{r("/game")},3e3)}else n.id!==a&&(s("Invalid room id"),setTimeout(()=>{s("")},3e3))})}return o(x,{children:d("form",{onSubmit:I,children:[h,"  ",f,o("input",{type:"text",onMouseLeave:l=>u(l.target.value)}),o("button",{style:{marginTop:"20px"},className:"btnstart",children:" Join Room  "})]})})}function F(){const[t,m]=e.useState(""),[i,c]=e.useState(""),[a,u]=e.useState(""),[f,g]=e.useState(""),h=S();e.useEffect(()=>{g(localStorage.getItem("name"))},[f]);function s(){if(t==="")c("Please type in a name to create lobby"),setTimeout(()=>{c("")},4e3);else{u("Creating a lobby...Please wait");const r=T(b,"game"+t);j(r,{name:t,joined:"false",playerTwo:"friend",code:"game"+t,zero:"",one:"",two:"",three:"",four:"",five:"",six:"",seven:"",eight:"",nine:"",PlayerOne:"X",PlayerTwo:"O",Disabled:!0,host:t,friend:t+"friend"}),setTimeout(()=>{h("/game")},3e3)}}return e.useEffect(()=>{localStorage.setItem("name",t)},[t]),d("div",{className:"homepage-div",children:[o("h2",{children:"Tic Tac Toe Game"}),d("div",{className:"create-room",children:[o("h2",{children:" Create room"}),i," ",a,o("input",{type:"text",onChange:r=>m(r.target.value)}),o("button",{className:"btnstart",style:{marginTop:"20px"},onClick:s,children:" Create lobby "})]}),d("div",{className:"joins-room",children:[" ",o("h2",{children:" Join Room"}),o(N,{})]})]})}export{F as default};
